# Implementation Plan: Lair Minion Sustainability Scorer

## Overview

This plan describes the implementation of a **VECTOR function** that evaluates how well a location can support a functioning evil workforce. The function returns a probability distribution across 5 sustainability tiers: Exceptional, Strong, Adequate, Limited, and Insufficient.

---

## Input Schema Structure

```json
{
  "type": "object",
  "description": "Input for the lair minion sustainability scorer function. Accepts a location description in text, image, or video format.",
  "properties": {
    "location": {
      "anyOf": [
        {
          "type": "string",
          "description": "A text description of a potential lair location (island, underground complex, volcano, arctic base, underwater facility, etc.)"
        },
        {
          "type": "image",
          "description": "An image of a potential lair location (aerial photo, architectural rendering, satellite imagery, etc.)"
        },
        {
          "type": "video",
          "description": "A video tour or overview of a potential lair location"
        }
      ]
    }
  },
  "required": ["location"]
}
```

### Input Field Descriptions

- **location**: The single input field representing the potential evil lair site to be evaluated. Can be:
  - **Text**: Detailed description of the location including geography, climate, infrastructure, surrounding context, accessibility, and existing facilities
  - **Image**: Visual representation showing the location's physical characteristics, size, terrain, and visible infrastructure
  - **Video**: Moving footage providing a more complete understanding of the location's features, scale, and context

---

## Input Maps

**No input maps are needed.** This function evaluates a single location per invocation. There is no need for mapped task execution since all tasks evaluate the same location input.

---

## Function Definition Structure

```json
{
  "type": "vector.function",
  "description": "Evaluate how well a location can support a functioning evil workforce including scientists, guards, technicians, and ninjas. Returns a probability distribution across 5 sustainability tiers: Exceptional (can sustain thousands indefinitely), Strong (can sustain hundreds to thousands with minor compromises), Adequate (can sustain dozens to hundreds with significant effort), Limited (small teams only), and Insufficient (cannot support workforce operations).",
  "input_schema": { /* as defined above */ },
  "tasks": [ /* 6 vector.completion tasks */ ]
}
```

---

## Task Definitions

### Task 1: Living Quarters Potential Assessment

**Purpose**: Evaluate the location's capacity to house and sustain a functioning evil workforce.

**System Prompt Focus**:
- Evaluate raw volumetric capacity for housing personnel
- Assess environmental habitability (temperature, air quality, light, sanitation)
- Consider hierarchical accommodation potential (luxury for lieutenants, barracks for grunts)
- Evaluate recreation and morale infrastructure capacity
- Consider expansion potential

**Response Options** (5 tiers):
1. Exceptional: Could comfortably house thousands with full hierarchical accommodation, excellent environmental conditions, comprehensive recreation facilities
2. Strong: Could house hundreds to low thousands with adequate accommodation, acceptable conditions, solid recreation options
3. Adequate: Could house dozens to hundreds with basic accommodation, some environmental challenges manageable with investment
4. Limited: Could house only small teams, significant environmental challenges, minimal differentiation
5. Insufficient: Cannot meaningfully house personnel; fundamentally uninhabitable or too small

---

### Task 2: Recruitment Pipeline Viability Assessment

**Purpose**: Evaluate the location's access to sustainable streams of potential evil workforce recruits.

**System Prompt Focus**:
- Proximity to populations susceptible to evil recruitment (desperate, disillusioned, amoral)
- Local economic conditions making evil employment attractive
- Cultural factors normalizing secrecy, hierarchy, service to unconventional employers
- Discretion of surrounding population
- Balance between isolation and recruitment accessibility

**Response Options** (5 tiers):
1. Exceptional: Multiple accessible populations with high recruitment susceptibility, favorable conditions, reliable discretion
2. Strong: Good access to recruitment populations with some logistical challenges
3. Adequate: Recruitment possible but requires significant effort and extended logistics
4. Limited: Recruitment extremely difficult; remote from suitable populations
5. Insufficient: No viable recruitment access; completely isolated or hostile populations

---

### Task 3: Training Facilities Capacity Assessment

**Purpose**: Evaluate the location's capacity to support comprehensive evil workforce training.

**System Prompt Focus**:
- Space for combat training (hand-to-hand, weapons drills, formations)
- Weapons qualification and exotic weapons testing facilities
- Tactical training environments (mock facilities, hero encounter simulation)
- Obstacle courses and physical conditioning infrastructure
- Experimental equipment and vehicle testing grounds
- Indoctrination and ideological training facilities

**Response Options** (5 tiers):
1. Exceptional: Comprehensive training capacity across all domains; could train a complete evil army
2. Strong: Good training facilities with minor gaps addressable through supplementary arrangements
3. Adequate: Basic training possible; limited weapons facilities, minimal simulation capacity
4. Limited: Minimal training capacity; space for basic physical training only
5. Insufficient: No meaningful training capacity; cannot support systematic workforce development

---

### Task 4: Medical and Welfare Infrastructure Assessment

**Purpose**: Evaluate the location's capacity for medical care and welfare support.

**System Prompt Focus**:
- Capacity for treating distinctive evil workplace injuries (laser burns, hero encounters, exotic injuries)
- Trauma surgery and emergency response capabilities
- Mental health support (existential counseling, combat trauma, isolation management)
- Family accommodation and support services
- Retirement and transition planning infrastructure

**Response Options** (5 tiers):
1. Exceptional: Full medical and welfare infrastructure; comprehensive injury treatment, mental health, family support, retirement provisions
2. Strong: Solid medical capacity with some limitations; adequate mental health, reasonable family considerations
3. Adequate: Essential medical care for common injuries; serious injuries require evacuation; limited support
4. Limited: Basic first aid only; no mental health, family, or retirement infrastructure
5. Insufficient: No meaningful medical or welfare capacity; injuries cannot be treated

---

### Task 5: Loyalty Maintenance Capacity Assessment

**Purpose**: Evaluate the location's capacity to maintain organizational loyalty and prevent defection.

**System Prompt Focus**:
- Geographic isolation limiting outside contact
- Communication control infrastructure (monitored channels, filtered media)
- Physical access control (difficulty of unauthorized exit)
- Surveillance infrastructure capacity
- Environmental dependency creation (specialized adaptation, skill lock-in)

**Response Options** (5 tiers):
1. Exceptional: Natural isolation and dependency factors maintain loyalty; comprehensive surveillance, complete control
2. Strong: Good isolation with some active measures required; solid surveillance, moderate exit difficulty
3. Adequate: Partial isolation requiring active loyalty programs; basic surveillance, exit possible with effort
4. Limited: Poor isolation with easy outside contact; minimal surveillance, simple exit
5. Insufficient: No loyalty maintenance capacity; no isolation, trivial exit, easy outside communication

---

### Task 6: Holistic Sustainability Tier Assessment

**Purpose**: Synthesize all dimensions into an integrated overall assessment.

**System Prompt Focus**:
- Integrate all five dimensional assessments
- Identify critical weaknesses that limit overall sustainability regardless of strengths
- Recognize synergies where strengths compensate for weaknesses
- Apply the binding constraint principle (weakest critical dimension limits overall tier)
- Assess long-term operational viability

**Response Options** (5 tiers):
1. Exceptional: Outstanding support for large-scale operations indefinitely; no critical weaknesses
2. Strong: Can support substantial operations with minor compromises; one adequate dimension compensated by excellence elsewhere
3. Adequate: Can support moderate operations with significant effort; multiple adequate dimensions, requires active management
4. Limited: Can support only small-scale operations; multiple critical weaknesses
5. Insufficient: Cannot meaningfully support workforce operations; fundamental failures across dimensions

---

## Expressions

### User Content Expressions

Each task will use a Starlark expression to format the user prompt:

```starlark
"'Evaluate the [DIMENSION NAME] of this potential evil lair location:\\n\\n' + str(input['location'])"
```

For the holistic task:
```starlark
"'Provide a HOLISTIC SUSTAINABILITY TIER assessment for this potential evil lair location, considering all workforce sustainability dimensions (living quarters, recruitment, training, medical/welfare, loyalty maintenance):\\n\\n' + str(input['location'])"
```

### Output Expressions

Each dimensional task (Tasks 1-5) outputs a weighted score using the 5-tier structure:

```starlark
"output['scores'][0] * 1.0 + output['scores'][1] * 0.75 + output['scores'][2] * 0.5 + output['scores'][3] * 0.25 + output['scores'][4] * 0.0"
```

The holistic task (Task 6) will output directly as the probability distribution:

For a vector function, the final output should be the probability vector directly from the holistic assessment:

```starlark
"[output['scores'][0], output['scores'][1], output['scores'][2], output['scores'][3], output['scores'][4]]"
```

### Alternative Approach: Aggregated Output

If the function framework expects aggregation of all tasks, we may need to combine the dimensional scores with the holistic assessment. A weighted approach:

```starlark
# Final aggregation giving 50% weight to holistic, 10% to each dimension
# This would be in a final aggregation step if needed
```

Given this is a vector.function returning probability distributions, the cleanest approach is to have the holistic task produce the final distribution directly, using the dimensional assessments to inform the model's judgment.

---

## Test Inputs

### Test 1: Exceptional Location - Purpose-Built Island Complex

```json
{
  "location": "A private volcanic island in the South Pacific, 200 miles from the nearest inhabited island. Features a massive extinct volcanic crater that has been partially developed with a multi-level underground complex capable of housing 5,000 personnel. The island includes a natural deep-water harbor concealed by rock formations, an airstrip hidden under retractable jungle canopy, and geothermal power providing unlimited energy. The nearest population center is a struggling island nation with 40% unemployment and a government known for accepting 'development investments' without questions. The island's unique atmospheric conditions create natural communication dead zones, and the specialized dive equipment needed to access the underwater entrance creates inherent dependency. Existing infrastructure includes a 200-bed hospital wing, Olympic-sized training pool, three shooting ranges, and a state-of-the-art simulation center. Climate is tropical but the underground facilities maintain perfect 72°F year-round."
}
```
**Expected Tier**: Exceptional (strong across all dimensions)

---

### Test 2: Strong Location - Converted Military Bunker

```json
{
  "location": "An abandoned Cold War military bunker complex in Eastern Europe, located in a mountainous region near a former industrial city with 25% unemployment. The underground facility spans three levels with capacity for approximately 800 personnel. Existing military infrastructure includes barracks, a small infirmary, training rooms, and a motor pool. The nearest town (population 15,000) has a tradition of 'not asking questions' dating back to Soviet times. The facility has a single heavily fortified entrance and emergency exits that emerge 2 kilometers away in dense forest. Communication equipment can be controlled from a central hub. The region experiences harsh winters but the bunker has functional heating. The facility requires modernization of medical equipment and expansion of recreational areas, but the fundamental infrastructure is solid. Local population includes many former military personnel seeking employment."
}
```
**Expected Tier**: Strong (good infrastructure, good recruitment, some gaps addressable)

---

### Test 3: Adequate Location - Remote Research Station

```json
{
  "location": "A decommissioned Arctic research station on a remote island in northern Canada. The facility can house approximately 150 personnel in modular buildings designed for extreme cold. There is a small airstrip suitable for supply planes and helicopters. The nearest settlement is an indigenous community of 500 people, 200 kilometers away, who maintain strict privacy traditions but have limited interest in outside employment. The facility has basic medical capabilities (first aid station, small surgery room) but serious injuries would require helicopter evacuation (weather permitting). Training space is limited to indoor facilities due to climate. The extreme isolation provides excellent security but makes recruitment challenging—personnel must be transported from distant population centers. Power comes from diesel generators requiring regular fuel shipments. Recreation is limited to a common room with satellite TV and a small gym. Personnel rotation every 6 months is typical due to psychological strain of isolation."
}
```
**Expected Tier**: Adequate (can function with effort, significant limitations)

---

### Test 4: Limited Location - Warehouse District Property

```json
{
  "location": "A large abandoned warehouse in an industrial district of a mid-sized American city. The 50,000 square foot space could potentially house 50-75 personnel in converted office areas. The warehouse has no specialized facilities—just open floor space, basic utilities, and a small office section. The surrounding area includes active businesses, residential neighborhoods within a mile, and regular police patrols. No training facilities exist, and any construction or noise would attract attention from neighbors. The local population is employed and unlikely to accept suspicious employment offers. Cell phone coverage is excellent throughout the building and surrounding area. The nearest hospital is 10 minutes away but using it would create records. Personnel could easily leave at any time—the building has multiple exits onto public streets. The property offers no isolation, no specialized infrastructure, and no natural recruitment advantages."
}
```
**Expected Tier**: Limited (urban location unsuitable for scale operations)

---

### Test 5: Insufficient Location - Single Room Apartment

```json
{
  "location": "A 400 square foot studio apartment on the 12th floor of a residential building in downtown Tokyo. The apartment has one bathroom, a small kitchen area, and a single room that serves as living and sleeping space. The building has 24/7 security cameras in all hallways and the lobby. Neighbors are closely packed on all sides. The apartment complex has strict noise regulations and regular inspections. There is no storage space, no training area, and no possibility of housing more than 2-3 people. The surrounding area is one of the most densely populated and surveilled urban environments in the world. No modifications to the unit are permitted under the lease."
}
```
**Expected Tier**: Insufficient (cannot support any meaningful workforce)

---

### Test 6: Mixed Signals - Excellent Isolation, Poor Everything Else

```json
{
  "location": "A small uninhabited island in the remote South Atlantic, approximately 1,500 miles from any continental landmass. The island is approximately 2 square miles of rocky terrain with minimal vegetation. There is no existing infrastructure whatsoever—no buildings, no power, no water treatment, no harbor. The climate is harsh with frequent storms and cold temperatures. The nearest population center is over 1,000 miles away with no regular transport links. Supply would require chartering specialized vessels. The island has never been developed due to its remoteness and lack of resources. While completely isolated and unmonitored, the island would require complete construction from scratch with no local labor pool, no existing medical facilities, and logistics challenges making any development extremely difficult."
}
```
**Expected Tier**: Limited or Insufficient (exceptional isolation but critical failures in all other dimensions—binding constraint principle)

---

### Test 7: Image Input - Volcanic Island Aerial Photo

```json
{
  "location": "[IMAGE: Aerial photograph of a tropical volcanic island with visible caldera, surrounding jungle, natural harbor, and what appears to be a small existing structure near the coast]"
}
```
**Expected Tier**: Variable based on image content (tests image handling)

---

### Test 8: Edge Case - Fictional/Fantastical Location

```json
{
  "location": "The Fortress of Solitude at the North Pole—a massive crystalline structure emerging from the Arctic ice. The fortress features infinitely reconfigurable crystal architecture that can create any desired room configuration on demand. Temperature is maintained at comfortable levels despite the Arctic location. The fortress has advanced medical technology capable of treating any injury. However, the fortress is accessible only via flight, is in one of the most remote locations on Earth, and its crystal technology is not teachable to human personnel. The fortress was designed for a single occupant and has no recreational facilities or social spaces. The intense isolation and alien technology would create significant psychological challenges for human workforce adaptation."
}
```
**Expected Tier**: Adequate to Limited (amazing infrastructure but severe recruitment, training, and morale challenges for human workforce)

---

## Implementation Notes

1. **Function Type**: This is a `vector.function`, not a scalar function. The output must be a probability distribution across 5 tiers, not a single score.

2. **Task Integration**: The dimensional tasks (1-5) inform the model's understanding, while the holistic task (6) produces the final probability distribution. The model in task 6 should consider the full picture when voting.

3. **Binding Constraint Principle**: The holistic assessment must recognize that critical failures in any single dimension can limit overall sustainability regardless of excellence elsewhere. A location with no medical capacity cannot sustain operations even with perfect everything else.

4. **Tone**: System prompts should maintain the tongue-in-cheek evil lair evaluation tone while providing genuinely rigorous assessment criteria.

5. **Response Format**: Each task uses 5 response options corresponding to the 5 tiers. The vector.completion mechanism produces probability distributions across these options.

6. **No Aggregation Task Needed**: Since this is a vector function, the holistic task's output directly becomes the function's output—a 5-element probability vector.
